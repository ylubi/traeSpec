# Knowledges 文档规范

## 必须遵守的规范

- 必须根据 requirements.md 的内容，先查找相关信息再生成 knowledges 相关文档。
- 信息来源可以使用网络检索，必须记录来源与链接。需要根据用户需要来判断所需信息，是否需要通过网络检索。
- 必须建立独立目录保存 knowledges 文档，目录名使用 kebab-case。

## 文档结构规范

根据 requirements.md 中的需求与信息缺口，生成多份 knowledges 文档，并整理索引。

### 1. 目录结构
- **目录位置**: `trae_spec/{task_desc}/.trae_knowledges/{kebab-case}/`
- **必须包含**:
  - `index.md`：知识索引与概览
  - 若干 `knowledge-{topic}.md`：按主题拆分的知识文档

### 2. index.md 结构
- **格式**: `# {项目名称}知识索引`
- **内容**:
  - `## 概览`：本次检索范围与覆盖的需求编号
  - `## 知识清单`：以列表形式链接所有 knowledge 文档
  - `## 来源概览`：汇总所有来源（名称 + 链接）

### 3. knowledge-{topic}.md 结构
- **格式**: `# {主题}知识文档`
- **内容**:
  - `## 背景`：与需求相关的背景说明
  - `## 关键信息`：条目化结论与要点
  - `## 需求映射`：关联 requirements.md 的需求编号
  - `## 风险与约束`：已知限制、边界与注意事项
  - `## 参考来源`：带链接与访问日期的来源列表

## 内容规范

### 1. 信息检索
- 优先使用权威来源与官方文档
- 对每条关键信息提供来源链接
- 避免未经验证的结论

### 2. 语言要求
- 使用中文编写
- 术语保持一致
- 结论清晰、可追踪

### 3. 来源标注
- 每条来源格式: `- {来源名称}: {URL}（访问日期: YYYY-MM-DD）`
- 同一来源仅在 index.md 中汇总一次

### 4. 格式规范
- 使用 Markdown 格式
- 标题层级清晰（# → ## → ###）
- 列表项使用正确的缩进

## 质量要求

### 1. 完整性
- 覆盖 requirements.md 的核心需求与信息缺口
- knowledge 文档数量与主题明确
- 索引能完整链接到所有知识文档

### 2. 可验证性
- 所有结论可追溯到来源链接
- 需求映射清晰、可检查

### 3. 可维护性
- 目录结构清晰
- 主题拆分合理
- 更新时能快速定位到相关文档

## 示例结构

```markdown
# {项目名称}知识索引

## 概览
覆盖需求: 1.1, 1.2, 2.1

## 知识清单
- [认证与会话管理](knowledge-auth-session.md)
- [数据一致性策略](knowledge-data-consistency.md)

## 来源概览
- OAuth 2.0 RFC: https://www.rfc-editor.org/rfc/rfc6749 （访问日期: 2026-01-25）
- PostgreSQL 文档: https://www.postgresql.org/docs/ （访问日期: 2026-01-25）
```
